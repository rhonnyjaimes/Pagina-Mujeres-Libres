<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Página sobre la importancia de las mujeres libres y empoderadas en la sociedad actual.">
    <meta name="author" content="Equipo Mujeres Libres">
    <title>Noticias</title>
    <link rel="stylesheet" href="/noticias.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="icon" type="image/x-icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQc-DmshLNDlhgLf6xFk0AHOCZqrFXg8Qo3Jb_b4K8nHL_XukfKN-COdPBQxHKKmbulLo4&usqp=CAU">
</head>
<body>
    
    

   <div class="header">
        <a href="/agregar-noticia" class="btn">Agregar Noticia</a>
        <a href="/index" class="btn">Ir al Índice</a>
    </div> 
    
    <h1>Noticias Recientes</h1>
    <div id="news-container">
        <!-- Aquí se insertarán los títulos de las noticias mediante JavaScript  -->
    </div>
    

    <script>
        // Obtener títulos de noticias usando fetch para la ruta API
        fetch('/api/noticias')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('news-container');
                if (data && data.length > 0) {
                    data.forEach(noticia => {
                        const noticiaElement = document.createElement('div');
                        noticiaElement.innerHTML = `
                            <div class="noticia">
                                <h2>${noticia.titulo}</h2>
                                <a href="/detalle-noticia?id=${noticia.id}" class="btn">Ver Detalles</a>
                                <button class="btn" onclick="eliminarNoticia(${noticia.id})">Eliminar</button>
                            </div>
                            <hr>
                        `;
                        container.appendChild(noticiaElement);  // Aquí se debe usar `container` en lugar de `r`
                    });
                } else {
                    container.innerHTML = '<p>No hay noticias disponibles.</p>';
                }
            })
            .catch(error => console.error('Error al cargar noticias:', error));

        // Función para eliminar noticia
        function eliminarNoticia(id) {
            if (confirm('¿Estás seguro de que quieres eliminar esta noticia?')) {
                fetch(`/api/noticias/${id}`, { method: 'DELETE' })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert('Noticia eliminada correctamente');
                            location.reload(); // Recargar la página para reflejar los cambios
                        } else {
                            alert('Error al eliminar la noticia');
                        }
                    })
                    .catch(error => console.error('Error al eliminar noticia:', error));
            }
        }
    </script>
    
<script src="https://unpkg.com/scrollreveal"></script>
<script src="main.js"></script>
</body>
</html>
