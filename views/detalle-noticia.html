<!-- views/detalle-noticia.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Noticia</title>
    <link rel="stylesheet" href="/noticias.css">  <!-- Enlaza el archivo CSS -->
</head>
<body>
    <div id="detalle-container">
        <h1 id="titulo"></h1>
        <p id="contenido"></p>
        <p><strong>Autor:</strong> <span id="autor"></span></p>
        <p><strong>Fecha de Publicación:</strong> <span id="fecha"></span></p>
        <p><strong>ID:</strong> <span id="id"></span></p>
        
        <!-- Aquí se agregará la imagen si existe -->
        <div id="imagen-container"></div>
        
        <p><strong>Creado en:</strong> <span id="creado_en"></span></p>
        <p><strong>Actualizado en:</strong> <span id="actualizado_en"></span></p>
    </div>
    
    <script>
        // Extraer el parámetro 'id' de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');

        // Hacer una solicitud para obtener los detalles de la noticia
        fetch(`/api/noticias/${id}`)
            .then(response => response.json())
            .then(noticia => {
                // Insertar los detalles de la noticia en el DOM
                document.getElementById('titulo').textContent = noticia.titulo;
                document.getElementById('contenido').textContent = noticia.contenido;
                    // Mostrar la imagen si existe
                    if (noticia.imagen) {
                    const imagenContainer = document.getElementById('imagen-container');
                    imagenContainer.innerHTML = `<img src="/uploads/${noticia.imagen}" alt="Imagen de noticia" style="width:200px;">`;
                }
                
                document.getElementById('autor').textContent = noticia.autor;
                document.getElementById('fecha').textContent = new Date(noticia.fecha).toLocaleDateString();
                document.getElementById('id').textContent = noticia.id;
                
               document.getElementById('creado_en').textContent = new Date(noticia.creado_en).toLocaleDateString();
                document.getElementById('actualizado_en').textContent = new Date(noticia.actualizado_en).toLocaleDateString();
            })
            .catch(error => console.error('Error al cargar la noticia:', error));
    </script>
</body>
</html>
